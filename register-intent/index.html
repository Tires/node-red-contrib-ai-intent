<script type="text/javascript">
    RED.nodes.registerType("Register Intent", {
        category: 'AI Intent',
        color: '#a29bfe',
        icon:"font-awesome/fa-registered",
        defaults: {
            name: { value: "", required: true, validate: RED.validators.regex(/^[a-zA-Z0-9_-]{1,64}$/) },
            description: { value: "", required: true},
            excludeFromOpenAi: { value: false }, 
        },
        inputs: 0,
        outputs: 1,
        label: function () {
            return this.name || "Register Intent";
        },

    });


</script>

<script type="text/html" data-template-name="Register Intent">

    <div>
        <div class="form-row">
            <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
            <input type="text" id="node-input-name" placeholder="Name">
        </div>
        <div class="form-tips"><b>Tip:</b> Name should be alphanumeric including underscores and hyphens (no spaces).</div>
    </div>
    

    <div class="form-row">
        <label for="node-input-description"><i class="fa fa-tag"></i>Intent Description</label>
        <input type="text" id="node-input-description" placeholder="Description">
    </div>

    <div style="display: flex; justify-content: space-around;">

        <label for="node-input-excludeFromOpenAi" style="display: flex;">
            <i class="fa fa-tag"></i>
            <span style="margin-left: 5px;">Exclude from OpenAI</span>
            <input style="display: inline-block;margin-left: 1rem;" type="checkbox" id="node-input-excludeFromOpenAi"
                name="enable conversation"></label>
    </div>
  
</script>

<script type="text/html" data-help-name="Register Intent">
    <p>Creates a listener for specific event and fires when event is triggered</p>
    
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>Name
            <span class="property-type">string</span>
        </dt>
        <dd>This must be a unique to identify an automation. This must also use camel-case </dd>

        <dt>description
            <span class="property-type">string</span>
        </dt>
        <dd>Describes what the registered intent should be used for. OpenAI will use this as a description when 
            sending this intent as a function payload.</dd>
    
        <dt class="optional">excludeFromOpenAi
            <span class="property-type">boolean</span>
        </dt>
        <dd>If true, this intent will not be sent to OpenAI as a function it can call</dd>
    
    </dl>
    
    <h3>Details</h3>
    <p>Place this node at the begining of an automation to register it to be called by the <code>Call-Intent</code> node.
    Registering an intent is useful for integrating with AI's as the AI can use the <b>description</b> to 
determine the circumstances the intent should be called. As a result, make the <b>description</b> as clear and succinct
as possible.</p>
<p>Because this node is a custom trigger, OpenAI by default will add it to its list of functions it can call in order
    handle user requests. If you this is negatively affecting OpenAI's results or you don't want this function
    to be considered by OpenAI, set <b>excludeFromOpenAi</b> to <code>true</code> 
</p>
</script>